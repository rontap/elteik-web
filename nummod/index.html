<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nummód Gépi számok</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>

    <script src="./Float.class.js"></script>
    <style>
        [minp] {
            width: 180px;
        }

        body {
            margin: 20px;
            max-width: 800px;
        }

        .form-control {
            display: inline;
        }

        hr[s] {
            margin:5px;
            margin-bottom:-10px;
        }
        .big {
            font-size:16px;

        }
         * {
             font-family: "Bahnschrift", sans-serif;
         }
         #conv_actual {
             display:none;
         }
    </style>
</head>
<body>

<h2>Numerikus Módszerek | Gépi Számok</h2>
<hr/>
<form class="form-group" action="#">
    <h3>Step 1: Add meg a Gépi Szám adatait</h3>
    <br/>
    <b>M(
        t<input class="form-control" type="number" placeholder="Mantissza" minp id="mant"/>,
        k<sup>-</sup><input class="form-control" type="number" placeholder="Karakterisztika min" minp id="kar_min"/>,
        k<sup>+</sup><input class="form-control" type="number" placeholder="Karakterisztika max" minp id="kar_max"/>)
        <br/><br/>
<!--        fl(<input type="number" placeholder="float" id="flv" )<br/>-->

    </b>
    <button onclick="proc()" type="submit" class="btn btn-primary">
        Számolás
    </button>
    <br/>
    <hr/>
</form>

<h3>Gépi Szám adatai</h3>
<div class="form-group" id="output">
    <div class="alert alert-info" role="alert">
        Add meg a gépi szám alakját
    </div>
</div>
<hr/>
<h3>Gépi Szám konvertálása</h3>
TODO
<div class="form-group" id="conv_place">
<!--    <div class="alert alert-info" role="alert">-->
<!--        Add meg a gépi szám alakját gépi szám konvertáláshoz.-->
<!--    </div>-->
</div>
<div class="form-group" id="conv_actual">
<!--    A fent megadott M.-ben<br/>-->
<!--    [ <input class="form-control" type="number" id="fl_m" placeholder="Bináris szám" minp/> |-->
<!--    <input class="form-control" type="number" id="fl_k" placeholder="Karakterisztika" minp/> ]-->

<!--    <br/><br/>-->
<!--    <button onclick="proc_conv()" type="submit" class="btn btn-secondary">-->
<!--        Számolás-->
<!--    </button>-->

<!--    <br/>-->
<!--    <br/>-->

</div>
<hr/>

<script>

    function write_to_output(str , big) {
        output.innerHTML += "<br/>"
        if (!big) {
            output.innerHTML += `<code>${str}</code>`
        } else {
            output.innerHTML +=`<div class="big">${str}</div>`
        }

    }

    function divide() {
        output.innerHTML += "<hr s/>"
    }

    function proc() {
        output.innerHTML = "";
        const proc_float = new Float(
            mant.valueAsNumber,
            kar_min.valueAsNumber,
            kar_max.valueAsNumber
        )

        if (errors_found(proc_float)) return false;

        conv_place.style.display = "none";
        conv_actual.style.display = "block";

        proc_float.e0(write_to_output)
        divide()
        proc_float.e1(write_to_output)
        divide()
        proc_float.minf(write_to_output)
        divide()
        proc_float.mamount(write_to_output)

        return false
    }

    function errors_found(proc_float) {
        const errors = []
        if (isNaN(proc_float.m) || isNaN(proc_float.m) || isNaN(proc_float.m))
            errors.push("Mindhárom értéket kötelező számmal kitölteni.")
        if (proc_float.m < 1) errors.push("A mantissza értéke minimum 1")
        if (proc_float.km > 0) errors.push("A karakterisztika minimum értéke maximum 0")
        if (proc_float.kx < 0) errors.push("A karakterisztika maximum értéke minimum 0")


        if (errors.length > 0) {
            console.log(errors);
            output.innerHTML = `
            <div>
               <div class="alert alert-danger" role="alert">
                    ${errors.join('<br/>')}
               </div>
            </div>
            `
            return true;
        } else return false;
    }

    let FL;

    a = new Float(6, -10, 10)
</script>

</body>
</html>